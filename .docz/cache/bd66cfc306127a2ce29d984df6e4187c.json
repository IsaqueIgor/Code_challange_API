{"remainingRequest":"C:\\Users\\Isaque\\Desktop\\Side Projects\\Front End Projects\\masterclass\\node_modules\\thread-loader\\dist\\cjs.js??ref--5-1!C:\\Users\\Isaque\\Desktop\\Side Projects\\Front End Projects\\masterclass\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js??ref--5-2!C:\\Users\\Isaque\\Desktop\\Side Projects\\Front End Projects\\masterclass\\node_modules\\source-map-loader\\index.js!C:\\Users\\Isaque\\Desktop\\Side Projects\\Front End Projects\\masterclass\\src\\models\\User.js","dependencies":[{"path":"C:\\Users\\Isaque\\Desktop\\Side Projects\\Front End Projects\\masterclass\\src\\models\\User.js","mtime":1572627015066},{"path":"C:\\Users\\Isaque\\Desktop\\Side Projects\\Front End Projects\\masterclass\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1572265937651},{"path":"C:\\Users\\Isaque\\Desktop\\Side Projects\\Front End Projects\\masterclass\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1572265938495},{"path":"C:\\Users\\Isaque\\Desktop\\Side Projects\\Front End Projects\\masterclass\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js","mtime":1564663799457},{"path":"C:\\Users\\Isaque\\Desktop\\Side Projects\\Front End Projects\\masterclass\\node_modules\\source-map-loader\\index.js","mtime":1572265938432}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzpcXFVzZXJzXFxJc2FxdWVcXERlc2t0b3BcXFNpZGUgUHJvamVjdHNcXEZyb250IEVuZCBQcm9qZWN0c1xcbWFzdGVyY2xhc3NcXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxJc2FxdWVcXERlc2t0b3BcXFNpZGUgUHJvamVjdHNcXEZyb250IEVuZCBQcm9qZWN0c1xcbWFzdGVyY2xhc3NcXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzpcXFVzZXJzXFxJc2FxdWVcXERlc2t0b3BcXFNpZGUgUHJvamVjdHNcXEZyb250IEVuZCBQcm9qZWN0c1xcbWFzdGVyY2xhc3NcXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6XFxVc2Vyc1xcSXNhcXVlXFxEZXNrdG9wXFxTaWRlIFByb2plY3RzXFxGcm9udCBFbmQgUHJvamVjdHNcXG1hc3RlcmNsYXNzXFxub2RlX21vZHVsZXNcXGJhYmVsLXByZXNldC1yZWFjdC1hcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkM6XFxVc2Vyc1xcSXNhcXVlXFxEZXNrdG9wXFxTaWRlIFByb2plY3RzXFxGcm9udCBFbmQgUHJvamVjdHNcXG1hc3RlcmNsYXNzXFxub2RlX21vZHVsZXNcXGJhYmVsLXByZXNldC1yZWFjdC1hcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIkM6XFxVc2Vyc1xcSXNhcXVlXFxEZXNrdG9wXFxTaWRlIFByb2plY3RzXFxGcm9udCBFbmQgUHJvamVjdHNcXG1hc3RlcmNsYXNzXFxub2RlX21vZHVsZXNcXGJhYmVsLXByZXNldC1yZWFjdC1hcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9nZXQgZnJvbSAiQzpcXFVzZXJzXFxJc2FxdWVcXERlc2t0b3BcXFNpZGUgUHJvamVjdHNcXEZyb250IEVuZCBQcm9qZWN0c1xcbWFzdGVyY2xhc3NcXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZ2V0IjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJDOlxcVXNlcnNcXElzYXF1ZVxcRGVza3RvcFxcU2lkZSBQcm9qZWN0c1xcRnJvbnQgRW5kIFByb2plY3RzXFxtYXN0ZXJjbGFzc1xcbm9kZV9tb2R1bGVzXFxiYWJlbC1wcmVzZXQtcmVhY3QtYXBwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CgooZnVuY3Rpb24gKCkgewogIHZhciBlbnRlck1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5lbnRlck1vZHVsZSA6IHVuZGVmaW5lZDsKICBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOwp9KSgpOwoKdmFyIF9fc2lnbmF0dXJlX18gPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWxbImRlZmF1bHQiXS5zaWduYXR1cmUgOiBmdW5jdGlvbiAoYSkgewogIHJldHVybiBhOwp9OwoKdmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnc2VxdWVsaXplJyksCiAgICBTZXF1ZWxpemUgPSBfcmVxdWlyZS5TZXF1ZWxpemUsCiAgICBNb2RlbCA9IF9yZXF1aXJlLk1vZGVsOwoKdmFyIGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7Cgp2YXIgVXNlciA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Nb2RlbCkgewogIF9pbmhlcml0cyhVc2VyLCBfTW9kZWwpOwoKICBmdW5jdGlvbiBVc2VyKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVzZXIpOwoKICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVXNlcikuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVXNlciwgW3sKICAgIGtleTogImNoZWNrUGFzc3dvcmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrUGFzc3dvcmQocGFzc3dvcmQpIHsKICAgICAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkX2hhc2gpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9fcmVhY3RzdGFuZGluX19yZWdlbmVyYXRlQnlFdmFsIiwKICAgIC8vIEB0cy1pZ25vcmUKICAgIHZhbHVlOiBmdW5jdGlvbiBfX3JlYWN0c3RhbmRpbl9fcmVnZW5lcmF0ZUJ5RXZhbChrZXksIGNvZGUpIHsKICAgICAgLy8gQHRzLWlnbm9yZQogICAgICB0aGlzW2tleV0gPSBldmFsKGNvZGUpOwogICAgfQogIH1dLCBbewogICAga2V5OiAiaW5pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChzZXF1ZWxpemUpIHsKICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoVXNlciksICJpbml0IiwgdGhpcykuY2FsbCh0aGlzLCB7CiAgICAgICAgbmFtZTogewogICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORywKICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UKICAgICAgICB9LAogICAgICAgIGlkOiB7CiAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLAogICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSwKICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5JTlRFR0VSCiAgICAgICAgfSwKICAgICAgICBlbWFpbDogewogICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORywKICAgICAgICAgIHVuaXF1ZTogdHJ1ZSwKICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsCiAgICAgICAgICB2YWxpZGF0ZTogewogICAgICAgICAgICBpc0VtYWlsOiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBwYXNzd29yZDogewogICAgICAgICAgdHlwZTogU2VxdWVsaXplLlZJUlRVQUwsCiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBwYXNzd29yZF9oYXNoOiB7CiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HCiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgc2VxdWVsaXplOiBzZXF1ZWxpemUKICAgICAgfSk7CgogICAgICB0aGlzLmFkZEhvb2soJ2JlZm9yZVNhdmUnLAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICBfcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh1c2VyKSB7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBpZiAoIXVzZXIucGFzc3dvcmQpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIHJldHVybiBiY3J5cHQuaGFzaCh1c2VyLnBhc3N3b3JkLCA4KTsKCiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIHVzZXIucGFzc3dvcmRfaGFzaCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9XSk7CgogIHJldHVybiBVc2VyOwp9KE1vZGVsKTsKCm1vZHVsZS5leHBvcnRzID0gVXNlcjsKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVhY3RIb3RMb2FkZXIgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdCA6IHVuZGVmaW5lZDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoVXNlciwgIlVzZXIiLCAiQzpcXFVzZXJzXFxJc2FxdWVcXERlc2t0b3BcXFNpZGUgUHJvamVjdHNcXEZyb250IEVuZCBQcm9qZWN0c1xcbWFzdGVyY2xhc3NcXHNyY1xcbW9kZWxzXFxVc2VyLmpzIik7Cn0pKCk7Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciBsZWF2ZU1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5sZWF2ZU1vZHVsZSA6IHVuZGVmaW5lZDsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["C:/Users/Isaque/Desktop/Side Projects/Front End Projects/masterclass/src/models/User.js"],"names":["require","Sequelize","Model","bcrypt","User","password","compare","password_hash","sequelize","name","type","STRING","allowNull","id","autoIncrement","primaryKey","INTEGER","email","unique","validate","isEmail","VIRTUAL","addHook","user","hash","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;eAA8BA,OAAO,CAAC,WAAD,C;IAA7BC,S,YAAAA,S;IAAYC,K,YAAAA,K;;AACpB,IAAMC,MAAM,GAAGH,OAAO,CAAC,UAAD,CAAtB;;IAEMI,I;;;;;;;;;;;;;kCAwCUC,Q,EAAU;AACtB,aAAOF,MAAM,CAACG,OAAP,CAAeD,QAAf,EAAyB,KAAKE,aAA9B,CAAP;AACD;;;;;;;;;;yBAzCWC,S,EAAW;AACrB,2DAAW;AACTC,QAAAA,IAAI,EAAE;AACFC,UAAAA,IAAI,EAAET,SAAS,CAACU,MADd;AAEFC,UAAAA,SAAS,EAAE;AAFT,SADG;AAKTC,QAAAA,EAAE,EAAE;AACAC,UAAAA,aAAa,EAAE,IADf;AAEAC,UAAAA,UAAU,EAAE,IAFZ;AAGAL,UAAAA,IAAI,EAAET,SAAS,CAACe;AAHhB,SALK;AAUTC,QAAAA,KAAK,EAAE;AACHP,UAAAA,IAAI,EAAET,SAAS,CAACU,MADb;AAEHO,UAAAA,MAAM,EAAE,IAFL;AAGHN,UAAAA,SAAS,EAAE,KAHR;AAIHO,UAAAA,QAAQ,EAAE;AACRC,YAAAA,OAAO,EAAE;AADD;AAJP,SAVE;AAkBTf,QAAAA,QAAQ,EAAE;AACNK,UAAAA,IAAI,EAAET,SAAS,CAACoB,OADV;AAENT,UAAAA,SAAS,EAAE;AAFL,SAlBD;AAsBTL,QAAAA,aAAa,EAAC;AACVG,UAAAA,IAAI,EAAET,SAAS,CAACU;AADN;AAtBL,OAAX,EA0BA;AAAEH,QAAAA,SAAS,EAATA;AAAF,OA1BA;;AA6BA,WAAKc,OAAL,CAAa,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA,iCAA2B,iBAAMC,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA,uBACrBA,IAAI,CAAClB,QADgB;AAAA;AAAA;AAAA;;AAAA;AAAA,yBAEIF,MAAM,CAACqB,IAAP,CAAYD,IAAI,CAAClB,QAAjB,EAA2B,CAA3B,CAFJ;;AAAA;AAEvBkB,kBAAAA,IAAI,CAAChB,aAFkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA3B;;AAAA;AAAA;AAAA;AAAA;AAMA,aAAO,IAAP;AACD;;;;EAtCgBL,K;;AA6CnBuB,MAAM,CAACC,OAAP,GAAiBtB,IAAjB;;;;;;;;;;0BA7CMA,I","sourcesContent":["const { Sequelize , Model } = require('sequelize');\r\nconst bcrypt = require('bcryptjs')\r\n\r\nclass User extends Model {\r\n  static init(sequelize) {\r\n    super.init({\r\n      name: {\r\n          type: Sequelize.STRING,\r\n          allowNull: false\r\n        },\r\n      id: {\r\n          autoIncrement: true,\r\n          primaryKey: true,\r\n          type: Sequelize.INTEGER\r\n      },\r\n      email: { \r\n          type: Sequelize.STRING,\r\n          unique: true,\r\n          allowNull: false,\r\n          validate: {\r\n            isEmail: true,\r\n          }\r\n        },\r\n      password: {\r\n          type: Sequelize.VIRTUAL,\r\n          allowNull: false\r\n        },\r\n      password_hash:{\r\n          type: Sequelize.STRING,\r\n        }\r\n    }, \r\n    { sequelize }\r\n    );\r\n\r\n    this.addHook('beforeSave', async user => {\r\n      if (user.password) {\r\n        user.password_hash = await bcrypt.hash(user.password, 8);\r\n      }\r\n    });\r\n    \r\n    return this;\r\n  }\r\n\r\n  checkPassword(password) {\r\n    return bcrypt.compare(password, this.password_hash);\r\n  }\r\n}\r\n\r\nmodule.exports = User;"]}]}